#!/bin/bash
#SBATCH --job-name=convert_colmap
#SBATCH --output=logs/convert_%j.out
#SBATCH --partition=titanxp
#SBATCH --gres=gpu:1
#SBATCH --time=01:00:00
#SBATCH --mem=16G

# Slurm ì‹œìŠ¤í…œ ì •ë³´ ì¶œë ¥
echo "[INFO] CUDA_VISIBLE_DEVICES=$CUDA_VISIBLE_DEVICES"
echo "[INFO] SLURM_JOB_ID: $SLURM_JOB_ID"

# 1. Conda í™˜ê²½ í™œì„±í™”
source $HOME/miniconda3/etc/profile.d/conda.sh
conda activate gaussian_splatting

# ğŸ”§ conda CUDA ìš°ì„  ì ìš© (í•µì‹¬ í•´ê²°)
export LD_LIBRARY_PATH=$CONDA_PREFIX/lib:$LD_LIBRARY_PATH

# ì‘ì—… ë””ë ‰í† ë¦¬ ì´ë™
cd /home/rlatnsgh0708/research_project/gaussian-splatting

# 3. convert.py ì‹¤í–‰
python convert.py -s data/tandt/truck

conda deactivate
echo "=== JOB FINISHED ==="